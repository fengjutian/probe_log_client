<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script> -->
</head>
<body>

    <button id="btn">保存数据</button>

    <button id="remove">移除数据</button>

    <button id="getAll">查询所有数据</button>

    <script>
        // let db = new Dexie("MyDatabase");

        // db.version(1).stores({
        //     friends: "++id, name, age, isCloseFriend",
        //     notes: "++id, title, date, *items",
        // });

        // db.transaction("rw", db.friends, db.notes, function* () {

        //     let friend1Id = yield db.friends.add({
        //         name: "Camilla",
        //         age: 25,
        //         isCloseFriend: 1,
        //     });

        //     let friend2Id = yield db.friends.add({
        //         name: "Ban Ki-moon",
        //         age: 70,
        //         isCloseFriend: 0,
        //     });

        //     let noteId = yield db.notes.add({
        //         title: "Shop tomorrow",
        //         date: new Date(),
        //         items: ["milk", "butter"],
        //     });

        //     // Let's query the db
        //     let closeFriends = yield db.friends
        //         .where("isCloseFriend")
        //         .equals(1)
        //         .toArray();

        //         console.log("Close friends:" + closeFriends.map((f) => f.name));

        //     let toShop = yield db.notes
        //         .where("title")
        //         .startsWithIgnoreCase("shop")
        //         .toArray();

        //     console.log("Shopping list: " + toShop.map((note) => note.items));
        // }).catch(function (err) {
        //     // Catch any error event or exception and log it:
        //     console.error(err.stack || err);
        // });

    </script>

    <script type="module">
        import { add, getAll, clearAll } from './db.js';

        document.querySelector('#btn').addEventListener('click', () => {
            add('1111', '22222')
        })

        document.querySelector('#remove').addEventListener('click', () => {
            clearAll()
        })

        document.querySelector('#getAll').addEventListener('click', () => {
           let all = getAll()
           all.then(res => {
            console.log(1111, res)
           })
        //    console.log(111, all)
        })
    </script>
    
</body>
</html>